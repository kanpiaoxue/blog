#Linux下VSFTP配置全攻略
###发表时间：2013-05-27
###分类：vsftp,Linux
###iteye原始地址：<a href="https://kanpiaoxue.iteye.com/admin/blogs/1876572" target="_blank">https://kanpiaoxue.iteye.com/admin/blogs/1876572</a>

---

<div class="iteye-blog-content-contain" style="font-size: 14px;"> 
 <p><a href="http://www.linuxidc.com/Linux/2007-10/8062.htm">http://www.linuxidc.com/Linux/2007-10/8062.htm</a></p> 
 <p>&nbsp;</p> 
 <p>----------&gt; &nbsp;<a style="line-height: 1.5;" href="http://blog.csdn.net/kuzhu/article/details/844427">http://blog.csdn.net/kuzhu/article/details/844427</a></p> 
 <p>&nbsp;</p> 
 <h3 style="font-size: 16px; padding-top: 10px;"><a style="color: #108ac6; text-decoration: underline;" href="http://feidaodalian.iteye.com/blog/427698">关于ftp中root用户连接时500 OOPS: cannot change directory:/root报错</a></h3> 
 <p><a href="http://feidaodalian.iteye.com/blog/427698">http://feidaodalian.iteye.com/blog/427698</a></p> 
 <p>&nbsp;</p> 
 <p>&nbsp;</p> 
 <p><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">vsftp配置指南</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">1.相关配置文件&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">/etc目录下的vsftpd.conf,vsftpd.ftpuser,vsftpd.user_list,/etc/xinetd.d/vsftpd&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">2.配置vsftp&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">主要是修改/etc/vsftpd.conf就可以了,相关参数如下:</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">anonymous_enable=YES 是否允许匿名ftp,如否则选择NO&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">local_enable=YES 是否允许本地用户登录&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">local_umask=022 默认的umask码&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">anon_upload_enable=YES 是否允许匿名ftp用户访问&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">anon_upload_enable=YES 是否允许匿名上传文件&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">anon_mkdir_write_enable=YES 是否允许匿名用户有创建目录的权利&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">dirmessage_enable=YES 是否显示目录说明文件,默认是YES但需要收工创建.message文件&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">xferlog_enable=YES 是否记录ftp传输过程&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">connect_from_port_20=YES 是否确信端口传输来自20(ftp-data)&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">chown_upload=YES&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">chown_username=username 是否改变上传文件的属主,如果是需要输入一个系统用户名,你可以把上传的文件都改成root属主&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">xferlog_file=/var/log/vsftpd.log ftp传输日志的路径和名字默认是/var/log/vsftpd.log&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">xferlog_std_format=YES 是否使用标准的ftp xferlog模式&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">idle_session_timeout=600 设置默认的断开不活跃session的时间&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">data_connection_timeout=120 设置数据传输超时时间&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">nopriv_user=ftpsecure 运行vsftpd需要的非特权系统用户默认是nobody&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">async_abor_enable=YES 是否允许运行特殊的ftp命令async ABOR.这里我翻译的不爽,原文如下:&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">When enabled, a special FTP command known as "async ABOR" will be enabled. Only ill advised FTP clients will use this feature.Addtionally, this feature is awkward to handle, so it is dis-abled by default. Unfortunately, some FTP clients will hang when cancelling a transfer unless this feature is available, so you may wish to enable it.&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">ascii_upload_enable=YES&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">ascii_download_enable=YES 是否使用ascii码方式上传和下载文件&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">ftpd_banner=Welcome to chenlf FTP service. 定制欢迎信息&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">deny_email_enable=YES&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">banned_email_file=/etc/vsftpd.banned_emails 是否允许禁止匿名用户使用某些邮件地址,如果是输入禁止的邮件地址的路径和文件名&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">chroot_list_enable=YES&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">chroot_list_file=/etc/vsftpd.chroot_list 是否将系统用户限止在自己的home目录下,如果选择了yes那么chroot_list_file=/etc/vsftpd.chroot_list中列出的是不chroot的用户的列表&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">max_clients=Number 如果以standalone模式起动,那么只有$Number个用户可以连接,其他的用户将得到错误信息,默认是0不限止&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">message_file 设置访问一个目录时获得的目录信息文件的文件名,默认是.message&nbsp;</span><br style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;"><span style="color: #333333; font-family: tahoma, 宋体; line-height: 22px; background-color: #efefef;">没发现有限止带宽的地方,如果谁知道请告诉我,详细的帮助说明请参考man vsftpd.conf</span></p> 
</div>