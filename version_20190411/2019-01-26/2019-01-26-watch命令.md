#watch命令
###发表时间：2019-01-26
###分类：Linux,经验
###iteye原始地址：<a href="https://kanpiaoxue.iteye.com/admin/blogs/2437107" target="_blank">https://kanpiaoxue.iteye.com/admin/blogs/2437107</a>

---

<div class="iteye-blog-content-contain" style="font-size: 14px;"> 
 <p>原文地址：<a href="http://www.cnblogs.com/peida/archive/2012/12/31/2840241.html">http://www.cnblogs.com/peida/archive/2012/12/31/2840241.html</a></p> 
 <p>&nbsp;</p> 
 <p>内容：</p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 宋体;">watch是一个非常实用的命令，基本所有的Linux发行版都带有这个小工具，如同名字一样，watch可以帮你监测一个命令的运行结果，省得你一遍遍的手动运行。在Linux下，watch是周期性的执行下个程序，并全屏显示执行结果。</span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';">你可以拿他来监测你想要的一切命令的结果变化，比如&nbsp;tail&nbsp;一个&nbsp;log&nbsp;文件，ls&nbsp;监测某个文件的大小变化，看你的想象力了</span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 宋体;">！</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 'Times New Roman';">1．</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">命令格式：</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 宋体;">watch[参数][命令]</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 'Times New Roman';">2．</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">命令功能：</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 宋体;">可以将命令的输出结果输出到标准输出设备，多用于周期性执行命令/定时执行命令</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 'Times New Roman';">3．</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">命令参数：</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; line-height: 15.75pt;"><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: 宋体;">-</span><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: Tahoma;">n或--interval&nbsp;&nbsp;watch缺省每2秒运行一下程序</span><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: 宋体;">，</span><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: Tahoma;">可以用-n或-interval来指定间隔的时间</span><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: 宋体;">。</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; line-height: 15.75pt;"><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: Tahoma;">-d或--differences&nbsp;&nbsp;用-d或--differences&nbsp;选项watch&nbsp;会高亮显示变化的区域</span><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: 宋体;">。</span><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: Tahoma;">&nbsp;而-d=cumulative选项会把变动过的地方(不管最近的那次有没有变动)都高亮显示出来</span><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: 宋体;">。</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px; line-height: 15.75pt;"><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: Tahoma;">-t&nbsp;或-no-title&nbsp;&nbsp;会关闭watch命令在顶部的时间间隔,命令</span><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: 宋体;">，</span><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: Tahoma;">当前时间的输出</span><span style="margin: 0px; padding: 0px; color: #454545; font-size: 10.5pt; font-family: 宋体;">。</span></p> 
 <p style="margin: 0pt auto; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;">&nbsp;<span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';">-h,&nbsp;--help&nbsp;</span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 宋体;">查看帮助文档</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 'Times New Roman';">4．</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">使用实例：</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">实例</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">1：</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">命令：</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 'Times New Roman';">每隔一秒高亮显示</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">网络</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 'Times New Roman';">链接数的变化情况</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';">watch&nbsp;-n&nbsp;1&nbsp;-d&nbsp;netstat&nbsp;-ant</span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';"><br style="margin: 0px; padding: 0px;"></span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">说明：</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';">其它操作：</span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';"><br style="margin: 0px; padding: 0px;"></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';">切换终端：&nbsp;Ctrl+x</span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';"><br style="margin: 0px; padding: 0px;"></span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';">退出watch：Ctrl+g</span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';"><br style="margin: 0px; padding: 0px;"></span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">实例</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">2：</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 'Times New Roman';">每隔一秒高亮显示http链接数的变化情况</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">命令：</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';">watch&nbsp;-n&nbsp;1&nbsp;-d&nbsp;'pstree|grep&nbsp;http'</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">说明：</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';">每隔一秒高亮显示http链接数的变化情况。&nbsp;后面接的命令若带有管道符，需要加''将命令区域归整。</span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';"><br style="margin: 0px; padding: 0px;"></span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">实例</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">3：</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">实时查看模拟攻击客户机建立起来的连接数</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">命令：</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';">watch&nbsp;'netstat&nbsp;-an&nbsp;|&nbsp;grep:21&nbsp;|&nbsp;\&nbsp;grep&lt;模拟攻击客户机的IP&gt;|&nbsp;wc&nbsp;-l'&nbsp;</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">说明：</span><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 'Times New Roman';"><br style="margin: 0px; padding: 0px;"></span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">实例4：</span><span style="margin: 0px; padding: 0px; color: #35383d; font-weight: bold; font-size: 10.5pt; font-family: Georgia;">监测</span><span style="margin: 0px; padding: 0px; color: #35383d; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">当前目录中</span>&nbsp;<span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">scf'</span>&nbsp;<span style="margin: 0px; padding: 0px; color: #35383d; font-weight: bold; font-size: 10.5pt; font-family: Georgia;">的文件</span><span style="margin: 0px; padding: 0px; color: #35383d; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">的变化</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">命令：</span></p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 宋体;">watch&nbsp;-d&nbsp;'ls&nbsp;-l|grep&nbsp;scf'</span>&nbsp;</p> 
 <p style="margin: 0pt auto 0pt 21pt; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;">&nbsp;</p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">实例</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">5：</span><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">10秒一次输出系统的平均负载</span></p> 
 <p style="margin: 0pt auto; text-indent: 21pt; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-weight: bold; font-size: 10.5pt; font-family: 宋体;">命令：</span></p> 
 <p style="margin: 0pt auto; color: #333333; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13.3333px;"><span style="margin: 0px; padding: 0px; font-size: 10.5pt; font-family: 宋体;">watch&nbsp;-n&nbsp;10&nbsp;'cat&nbsp;/proc/loadavg'</span></p> 
</div>